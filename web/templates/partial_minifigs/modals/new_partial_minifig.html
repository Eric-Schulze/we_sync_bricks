{{define "new-item-modal"}}
<div class="modal-overlay" hx-on:click="if(event.target === this) this.remove()">
    <div class="modal">
        <h2>Add New Item</h2>
        
        <!-- Bricklink Search Section -->
        <div class="form-group" style="margin-bottom: 2rem; padding: 1rem; background-color: #f8f9fa; border-radius: 8px;">
            <h3 style="margin-bottom: 1rem; color: #374151;">Search Bricklink</h3>
            <div style="display: flex; gap: 0.5rem;">
                <input type="text" 
                       id="bricklink-search" 
                       placeholder="Enter Bricklink Item ID (e.g., 3001)" 
                       style="flex: 1; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 4px;">
                <button type="button" 
                        class="btn btn-secondary"
                        hx-post="/partial-minifigs-lists/search-bricklink"
                        hx-vals='js:{"bricklink_id": document.getElementById("bricklink-search").value}'
                        hx-target="#search-results"
                        hx-swap="innerHTML">
                    Search
                </button>
            </div>
            <div id="search-results" style="margin-top: 1rem; min-height: 2rem;"></div>
        </div>

        <form hx-post="/partial-minifigs-lists/{{.ListID}}/partial-minifig" 
              hx-target="#list-items" 
              hx-swap="outerHTML"
              hx-on::after-request="document.getElementById('modal-container').innerHTML = ''">
            
            <div class="form-group">
                <label for="name">Item Name</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description"></textarea>
            </div>
            
            <div style="display: flex; gap: 0.5rem; justify-content: flex-end;">
                <button type="button" class="btn btn-secondary" 
                        onclick="document.getElementById('modal-container').innerHTML = ''">
                    Cancel
                </button>
                <button type="submit" class="btn">
                    <span class="htmx-indicator"><span class="spinner"></span></span>
                    Add Item
                </button>
            </div>
        </form>
    </div>
</div>
{{end}}