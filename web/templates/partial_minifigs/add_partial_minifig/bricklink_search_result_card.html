{{define "bricklink-search-result-card"}}
<div class="search-result minifig-card p-5 border-2 border-gray-200 rounded-xl bg-white my-4">
    <!-- Main Section: Picture and Basic Info -->
    <div class="flex gap-4 items-center">
        {{template "minifig-picture" (dict "ItemNo" .Item.No)}}
        {{template "minifig-info" (dict "Name" .Item.Name "ItemNo" .Item.No)}}
    </div>
    
    <!-- Hidden fields to store data -->
    <input type="hidden" id="parts-data-{{.Item.No}}" value="">
    <input type="hidden" id="item-name-{{.Item.No}}" value="{{.Item.Name}}">
</div>

{{template "bricklink-item-scripts" .}}

<script>
// Auto-load details when this specific item is rendered
(function() {
    const itemId = '{{.Item.No}}';
    
    function tryInitialize() {
        if (typeof initializeBricklinkItem === 'function') {
            console.log('Initializing minifig:', itemId);
            initializeBricklinkItem(itemId);
        } else {
            console.log('Function not yet available, retrying in 100ms for:', itemId);
            setTimeout(tryInitialize, 100);
        }
    }
    
    // Try immediately, then with small delay if needed
    tryInitialize();
})();
</script>
{{end}}